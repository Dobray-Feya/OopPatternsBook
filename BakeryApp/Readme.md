В книге приведены два варианта паттерна **Фабрика**: **Фабричный метод** и **Абстрактная фабрика**. 
В преддверии этих паттернов приведена идиома **Простая фабрика** - 
это еще не паттерн, но вещь очень полезная.

Суть всех фабрик - отделить создание объекта от его использования.
Пусть есть класс-продукт. Конкретные экземпляры продукта должны создаваться отдельно от кода,
где этот продукт используется.

## Простая фабрика

Если следовать идиоме **Простая фабрика**, то метод создания продукта выносится в отдельный класс (это и есть простая фабрика).
Все остальные части приложения, если им потребуется продукт, обращаются к простой фабрике.

Простая фабрика: ![Простая фабрика](Images/SimpleFactory.jpg)

## Фабричный метод

В паттерне **Фабричный метод** есть абстрактный класс. В нем есть абстрактный метод для создания продуктов
(*фабричный метод*). В остальных методах задается использование продукта.
От абстрактного класса-создателя наследуются конкретные классы-создатели.
В каждом конкретном классе-создателе задается метод создания 
конкретного объекта или даже нескольких объектов - в зависимости от параметра
(в книге и в моем примере для простоты параметр задается в виде строки).

Сам продукт реализован в виде интерфейса (абстрактного класса).
Конкретные продукты реализуют этот интерфейс.

В итоге получается две параллельные иерархии классов:
- абстрактный создатель + конкретные создатели,
- абстрактный продукт + конкретные продукты.

Фабричный метод: ![Фабричный метод](Images/FactoryMethod.jpg)

## Абстрактная фабрика

Абстрактная фабрика:![Абстрактная фабрика](Images/AbstactFactory.jpg)


## Сравнение паттернов
Задачи:
- Задача **Фабричного метода** - перемещение создания экземпляров в субклассы.
- Задача **Абстрактной фабрики** - создание семейств взаимосвязанных объектов
без зависимости от их конкретных классов.

Реализация:
- **Фабричный метод** основан на наследовании: создание объектов делегируется
субклассам, реализующим Фабричный метод для создания объектов.
- **Абстрактная фабрика** основана на композиции: создание объектов
реализуется в методе, доступ к которому осуществляется через интерфейс фабрики.

Оба паттерна инкапсулируют создание объектов, обеспечивая их слабую связность.

## Принцип инверсии зависимостей

Фабричные паттерны знакомят нас с еще одним принципом проектирования.

**Принцип инверсии зависимостей**: Код должен зависеть от абстракций, а не от конкретных классов.

Это значит, что высокоуровневые компоненты не должны зависеть от низкоуровневых;
вместо этого  и те и другие должны зависеть от абстракций.

Советы по применению принципа
- **Ссылки на конкретные классы не должны храниться в переменных** 
(т.е. в переменных вместо new надо использовать фабрику).
- **В архитектуре не должно быть классов, производных от конкретных классов**
(иначе создается зависимость между классами, конкретные классы 
надо наследовать от абстрактных классов и интерфейсов).
- **Ни один метод не должен переопределять реализованный метод родителя**
(иначе это значит, что родительский метод был плохой абстракцией;
методы, реализованные в родительском классе, должны использоваться всеми наследниками).
